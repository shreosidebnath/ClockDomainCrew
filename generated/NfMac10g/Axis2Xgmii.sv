// Generated by CIRCT firtool-1.47.0
module Axis2Xgmii(
  input         clock,
                reset,
                io_rst,
  input  [79:0] io_configuration_vector,
  input  [63:0] io_tdata,
  input  [7:0]  io_tkeep,
  input         io_tvalid,
                io_tlast,
                io_tuser,
  output [25:0] io_tx_statistics_vector,
  output        io_tx_statistics_valid,
                io_lane4_start,
  output [1:0]  io_dic_o,
  output [63:0] io_xgmii_d,
  output [7:0]  io_xgmii_c,
  output        io_tready
);

  reg  [23:0] fsm;
  reg  [63:0] tdata_i;
  reg  [63:0] d;
  reg  [7:0]  c;
  reg  [1:0]  dic;
  reg  [31:0] crc_32;
  reg  [31:0] calcted_crc4B;
  reg  [13:0] bcount;
  reg         prv_valid;
  reg         tready_reg;
  reg         lane4_start_reg;
  reg  [25:0] tx_statistics_vector_reg;
  reg         tx_statistics_valid_reg;
  wire        _GEN = fsm == 24'h0;
  wire        _GEN_0 = fsm == 24'h1;
  wire        _GEN_1 = fsm == 24'h2;
  wire        _GEN_2 = fsm == 24'h3;
  wire        _GEN_3 = fsm == 24'h4;
  wire        _GEN_4 = fsm == 24'h5;
  wire        _GEN_5 = _GEN_4 & io_configuration_vector[1];
  wire        _GEN_6 = ~_GEN_3 & _GEN_5;
  always @(posedge clock) begin
    if (reset) begin
      fsm <= 24'h0;
      tdata_i <= 64'h0;
      d <= 64'h707070707070707;
      c <= 8'hFF;
      dic <= 2'h0;
      crc_32 <= 32'h0;
      calcted_crc4B <= 32'h0;
      bcount <= 14'h0;
      prv_valid <= 1'h0;
      tready_reg <= 1'h0;
      lane4_start_reg <= 1'h0;
      tx_statistics_vector_reg <= 26'h0;
      tx_statistics_valid_reg <= 1'h0;
    end
    else begin
      if (io_rst) begin
        fsm <= 24'h0;
        tdata_i <= 64'h0;
        d <= 64'h707070707070707;
        c <= 8'hFF;
        calcted_crc4B <= 32'h0;
        bcount <= 14'h0;
      end
      else begin
        if (_GEN)
          fsm <= 24'h1;
        else if (_GEN_0) begin
          if (io_tvalid) begin
            fsm <= 24'h2;
            d <= 64'hD5555555555555FB;
            c <= 8'h1;
          end
          else begin
            d <= 64'h707070707070707;
            c <= 8'hFF;
          end
        end
        else if (_GEN_1) begin
          if (io_tuser) begin
            fsm <= 24'h3;
            d <= {16'hFDFE, d[55:8]};
            c <= 8'h81;
          end
          else begin
            if (io_tlast) begin
              if (io_tlast & io_tkeep[7])
                fsm <= 24'h4;
              else if (io_tlast & (io_tkeep[6] | io_tkeep[5] | io_tkeep[4]))
                fsm <= 24'h6;
              else if (io_tlast & io_tkeep[3])
                fsm <= 24'hB;
              else if (io_tlast & ~(io_tkeep[3]))
                fsm <= 24'hD;
            end
            d <= tdata_i;
            c <= 8'h0;
          end
        end
        else if (_GEN_2) begin
          fsm <= 24'h1;
          d <= 64'h707070707070707;
          c <= 8'hFF;
        end
        else if (_GEN_3) begin
          fsm <= 24'h5;
          d <= tdata_i;
          c <= 8'h0;
        end
        else if (_GEN_4) begin
          fsm <= {22'h0, ~(io_configuration_vector[1]), 1'h1};
          d <= {32'h70707FD, calcted_crc4B};
          c <= 8'hF0;
        end
        if (_GEN | ~(_GEN_0 | _GEN_1)) begin
        end
        else
          tdata_i <= io_tdata;
        if (_GEN | _GEN_0 | _GEN_1 | _GEN_2 | ~_GEN_3) begin
        end
        else
          calcted_crc4B <=
            ~{crc_32[0],
              crc_32[1],
              crc_32[2],
              crc_32[3],
              crc_32[4],
              crc_32[5],
              crc_32[6],
              crc_32[7],
              crc_32[8],
              crc_32[9],
              crc_32[10],
              crc_32[11],
              crc_32[12],
              crc_32[13],
              crc_32[14],
              crc_32[15],
              crc_32[16],
              crc_32[17],
              crc_32[18],
              crc_32[19],
              crc_32[20],
              crc_32[21],
              crc_32[22],
              crc_32[23],
              crc_32[24],
              crc_32[25],
              crc_32[26],
              crc_32[27],
              crc_32[28],
              crc_32[29],
              crc_32[30],
              crc_32[31]};
        if (io_tvalid) begin
          if (prv_valid)
            bcount <=
              bcount
              + {10'h0,
                 {1'h0,
                  {1'h0, {1'h0, io_tkeep[0]} + {1'h0, io_tkeep[1]}}
                    + {1'h0, {1'h0, io_tkeep[2]} + {1'h0, io_tkeep[3]}}}
                   + {1'h0,
                      {1'h0, {1'h0, io_tkeep[4]} + {1'h0, io_tkeep[5]}}
                        + {1'h0, {1'h0, io_tkeep[6]} + {1'h0, io_tkeep[7]}}}};
          else
            bcount <=
              {10'h0,
               {1'h0,
                {1'h0, {1'h0, io_tkeep[0]} + {1'h0, io_tkeep[1]}}
                  + {1'h0, {1'h0, io_tkeep[2]} + {1'h0, io_tkeep[3]}}}
                 + {1'h0,
                    {1'h0, {1'h0, io_tkeep[4]} + {1'h0, io_tkeep[5]}}
                      + {1'h0, {1'h0, io_tkeep[6]} + {1'h0, io_tkeep[7]}}}};
        end
      end
      if (io_rst | _GEN) begin
        dic <= 2'h0;
        tx_statistics_vector_reg <= 26'h0;
      end
      else begin
        if (~_GEN_0 | io_tvalid | dic == 2'h0) begin
        end
        else
          dic <= dic - 2'h1;
        if (_GEN_0)
          tx_statistics_vector_reg <=
            {tx_statistics_vector_reg[25:15], tx_statistics_vector_reg[14:0] | 15'h4000};
        else if (_GEN_1) begin
          if (io_tuser)
            tx_statistics_vector_reg <= {12'h0, tx_statistics_vector_reg[13:0]};
        end
        else if (_GEN_2)
          tx_statistics_vector_reg <=
            {tx_statistics_vector_reg[25:14],
             tx_statistics_vector_reg[13:0] | bcount + 14'h4};
        else if (_GEN_3 | ~_GEN_5) begin
        end
        else
          tx_statistics_vector_reg <=
            {tx_statistics_vector_reg[25:14],
             tx_statistics_vector_reg[13:0] | bcount + 14'h4};
      end
      if (io_rst | ~(_GEN | ~(_GEN_0 ? io_tvalid : _GEN_1)))
        crc_32 <= 32'h0;
      prv_valid <= ~io_rst & io_tvalid;
      tready_reg <=
        ~io_rst
        & (_GEN
           | (_GEN_0
                ? tready_reg
                : _GEN_1 ? ~io_tuser & ~io_tlast : _GEN_2 | _GEN_6 | tready_reg));
      lane4_start_reg <= ~io_rst & (_GEN | ~_GEN_0) & lane4_start_reg;
      tx_statistics_valid_reg <=
        ~(io_rst | _GEN | _GEN_0)
        & (~_GEN_1 & (_GEN_2 | _GEN_6) | tx_statistics_valid_reg);
    end
  end // always @(posedge)
  assign io_tx_statistics_vector = tx_statistics_vector_reg;
  assign io_tx_statistics_valid = tx_statistics_valid_reg;
  assign io_lane4_start = lane4_start_reg;
  assign io_dic_o = dic;
  assign io_xgmii_d = d;
  assign io_xgmii_c = c;
  assign io_tready = tready_reg;
endmodule

