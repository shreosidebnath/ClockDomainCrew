// Generated by CIRCT firtool-1.47.0
module PaddingCtrl(
  input         clock,
                reset,
                io_aresetn,
  input  [63:0] io_s_axis_tdata,
  input  [7:0]  io_s_axis_tkeep,
  input         io_s_axis_tvalid,
                io_s_axis_tlast,
                io_s_axis_tuser,
                io_m_axis_tready,
                io_lane4_start,
  input  [1:0]  io_dic,
  input         io_carrier_sense,
                io_rx_pause_active,
                io_tx_pause_send,
  input  [15:0] io_cfg_tx_pause_refresh,
  input  [47:0] io_cfg_station_macaddr,
  output        io_s_axis_tready,
  output [63:0] io_m_axis_tdata,
  output [7:0]  io_m_axis_tkeep,
  output        io_m_axis_tvalid,
                io_m_axis_tlast,
                io_m_axis_tuser
);

  reg  [8:0]  fsm;
  reg  [4:0]  trn;
  reg  [63:0] m_axis_tdata_d0;
  reg         m_axis_tvalid_d0;
  reg  [7:0]  last_tkeep;
  reg         pause_on;
  reg  [15:0] pause_refresh_cnt;
  reg  [1:0]  rx_pause_active_sync;
  reg         s_axis_tready_reg;
  reg  [63:0] m_axis_tdata_reg;
  reg  [7:0]  m_axis_tkeep_reg;
  reg         m_axis_tvalid_reg;
  reg         m_axis_tlast_reg;
  reg         m_axis_tuser_reg;
  wire        _GEN = fsm == 9'h0;
  wire        _GEN_0 = fsm == 9'h1;
  wire        _GEN_1 = io_s_axis_tvalid & s_axis_tready_reg;
  wire        _GEN_2 =
    io_tx_pause_send & ~pause_on | ~io_tx_pause_send & pause_on | pause_on
    & pause_refresh_cnt >= io_cfg_tx_pause_refresh;
  wire        _GEN_3 = fsm == 9'h2;
  wire        _GEN_4 = io_s_axis_tvalid & io_s_axis_tlast;
  wire        _GEN_5 = _GEN_4 & io_s_axis_tuser;
  wire        _GEN_6 = ~io_s_axis_tvalid | _GEN_5;
  wire        _GEN_7 = _GEN_4 & ~io_s_axis_tuser;
  wire        _GEN_8 = fsm == 9'h3;
  wire        _GEN_9 = _GEN | _GEN_0;
  wire        _GEN_10 = fsm == 9'h4;
  wire        _GEN_11 = fsm == 9'h5;
  wire        _GEN_12 = fsm == 9'h6;
  wire        _GEN_13 = ~io_s_axis_tvalid | io_s_axis_tlast;
  wire        _GEN_14 = fsm == 9'h8;
  wire        _m_axis_tlast_reg_T = trn == 5'h7;
  wire        _GEN_15 = _GEN_10 | _GEN_11 | _GEN_12;
  wire        _GEN_16 = _GEN_0 | _GEN_3 | _GEN_8 | _GEN_15;
  wire        _GEN_17 = _GEN | _GEN_16 | ~_GEN_14;
  wire        _GEN_18 = m_axis_tvalid_reg & io_m_axis_tready;
  wire        _GEN_19 = trn == 5'h8;
  always @(posedge clock) begin
    if (reset) begin
      fsm <= 9'h0;
      trn <= 5'h0;
      m_axis_tdata_d0 <= 64'h0;
      m_axis_tvalid_d0 <= 1'h0;
      last_tkeep <= 8'h0;
      pause_on <= 1'h0;
      pause_refresh_cnt <= 16'h0;
      rx_pause_active_sync <= 2'h0;
      s_axis_tready_reg <= 1'h0;
      m_axis_tdata_reg <= 64'h0;
      m_axis_tkeep_reg <= 8'h0;
      m_axis_tvalid_reg <= 1'h0;
      m_axis_tlast_reg <= 1'h0;
      m_axis_tuser_reg <= 1'h0;
    end
    else begin
      if (io_aresetn) begin
        if (_GEN) begin
          if (io_m_axis_tready)
            fsm <= 9'h1;
        end
        else if (_GEN_0) begin
          if (io_carrier_sense) begin
          end
          else if (_GEN_1)
            fsm <= 9'h2;
          else if (_GEN_2)
            fsm <= 9'h8;
        end
        else if (_GEN_3) begin
          if (io_s_axis_tvalid) begin
            if (_GEN_5)
              fsm <= 9'h6;
            else
              fsm <= {8'h1, _GEN_7};
          end
          else
            fsm <= 9'h5;
        end
        else if (_GEN_8) begin
          if (|(trn[4:3]))
            fsm <= {8'h2, io_lane4_start & io_dic == 2'h0 & last_tkeep == 8'h7 & trn[4]};
        end
        else if (_GEN_10)
          fsm <= 9'h5;
        else if (_GEN_11)
          fsm <= 9'h1;
        else if (_GEN_12) begin
          if (_GEN_13)
            fsm <= 9'h5;
        end
        else if (_GEN_14 & _GEN_18 & _GEN_19)
          fsm <= 9'h1;
        pause_on <=
          ~_GEN
          & (~_GEN_0 | io_carrier_sense | _GEN_1 | ~_GEN_2 ? pause_on : io_tx_pause_send);
        if (_GEN | ~(_GEN_16 | ~_GEN_14))
          pause_refresh_cnt <= 16'h0;
        else if (pause_on)
          pause_refresh_cnt <= pause_refresh_cnt + 16'h1;
        if (_GEN_17)
          m_axis_tdata_reg <= m_axis_tdata_d0;
        else if (trn == 5'h0)
          m_axis_tdata_reg <=
            {io_cfg_station_macaddr[39:32],
             io_cfg_station_macaddr[47:40],
             48'h180C2000001};
        else if (trn == 5'h1)
          m_axis_tdata_reg <=
            {32'h1008808,
             io_cfg_station_macaddr[7:0],
             io_cfg_station_macaddr[15:8],
             io_cfg_station_macaddr[23:16],
             io_cfg_station_macaddr[31:24]};
        else if (trn == 5'h2)
          m_axis_tdata_reg <= {48'h0, {16{io_tx_pause_send}}};
        else
          m_axis_tdata_reg <= m_axis_tdata_d0;
        m_axis_tlast_reg <=
          ~(_GEN | _GEN_0 | _GEN_3)
          & (_GEN_8 ? (|(trn[4:3])) : ~_GEN_15 & _GEN_14 & _m_axis_tlast_reg_T);
        m_axis_tuser_reg <= ~_GEN_9 & _GEN_3 & (~io_s_axis_tvalid | _GEN_5);
      end
      else
        fsm <= 9'h0;
      if (~(~io_aresetn | _GEN)) begin
        if (_GEN_0) begin
          if (io_carrier_sense) begin
          end
          else if (_GEN_1)
            trn <= 5'h1;
          else if (_GEN_2)
            trn <= 5'h0;
          if (io_carrier_sense | ~_GEN_1) begin
          end
          else begin
            m_axis_tdata_d0 <= io_s_axis_tdata;
            m_axis_tkeep_reg <= 8'hFF;
          end
        end
        else if (_GEN_3) begin
          if (trn[3])
            trn <= trn | 5'h10;
          else if (trn[4]) begin
          end
          else
            trn <= {1'h0, trn[3:0] + 4'h1};
          if (_GEN_6 | ~_GEN_7 | io_s_axis_tkeep[7])
            m_axis_tdata_d0 <= io_s_axis_tdata;
          else if (io_s_axis_tkeep[6])
            m_axis_tdata_d0 <= {8'h0, io_s_axis_tdata[55:0]};
          else if (io_s_axis_tkeep[5])
            m_axis_tdata_d0 <= {16'h0, io_s_axis_tdata[47:0]};
          else if (io_s_axis_tkeep[4])
            m_axis_tdata_d0 <= {24'h0, io_s_axis_tdata[39:0]};
          else if (io_s_axis_tkeep[3])
            m_axis_tdata_d0 <= {32'h0, io_s_axis_tdata[31:0]};
          else if (io_s_axis_tkeep[2])
            m_axis_tdata_d0 <= {40'h0, io_s_axis_tdata[23:0]};
          else if (io_s_axis_tkeep[1])
            m_axis_tdata_d0 <= {48'h0, io_s_axis_tdata[15:0]};
          else if (io_s_axis_tkeep[0])
            m_axis_tdata_d0 <= {56'h0, io_s_axis_tdata[7:0]};
          else
            m_axis_tdata_d0 <= io_s_axis_tdata;
        end
        else if (_GEN_8) begin
          trn <= trn + 5'h1;
          m_axis_tdata_d0 <= 64'h0;
          if (|(trn[4:3]))
            m_axis_tkeep_reg <= last_tkeep;
        end
        else if (_GEN_15 | ~_GEN_14) begin
        end
        else begin
          trn <= trn + 5'h1;
          if (_m_axis_tlast_reg_T)
            m_axis_tkeep_reg <= 8'hF;
          else
            m_axis_tkeep_reg <= 8'hFF;
        end
      end
      m_axis_tvalid_d0 <=
        io_aresetn
        & (_GEN
             ? m_axis_tvalid_d0
             : _GEN_0
                 ? ~io_carrier_sense & (_GEN_1 | ~_GEN_2 & m_axis_tvalid_d0)
                 : _GEN_3
                     ? ~_GEN_6 & m_axis_tvalid_d0
                     : ~(_GEN_8 & (|(trn[4:3]))) & m_axis_tvalid_d0);
      if (~(~io_aresetn | _GEN_9)) begin
        if (_GEN_3) begin
          if (_GEN_6 | ~_GEN_7) begin
          end
          else if (io_s_axis_tkeep[7])
            last_tkeep <= 8'hFF;
          else if (io_s_axis_tkeep[6])
            last_tkeep <= 8'h7F;
          else if (io_s_axis_tkeep[5])
            last_tkeep <= 8'h3F;
          else if (io_s_axis_tkeep[4])
            last_tkeep <= 8'h1F;
          else if (io_s_axis_tkeep[3])
            last_tkeep <= 8'hF;
          else if (io_s_axis_tkeep[2])
            last_tkeep <= 8'h7;
          else if (io_s_axis_tkeep[1])
            last_tkeep <= 8'h3;
          else if (io_s_axis_tkeep[0])
            last_tkeep <= 8'h1;
        end
        else if (_GEN_8)
          last_tkeep <= 8'hF;
      end
      rx_pause_active_sync <= {rx_pause_active_sync[0], io_rx_pause_active};
      s_axis_tready_reg <=
        io_aresetn
        & (_GEN
             ? io_m_axis_tready | s_axis_tready_reg
             : _GEN_0
                 ? ~io_carrier_sense
                   & (_GEN_1 ? s_axis_tready_reg : ~_GEN_2 & ~(rx_pause_active_sync[1]))
                 : _GEN_3
                     ? io_s_axis_tvalid & (_GEN_5 | ~_GEN_7)
                     : _GEN_8 | _GEN_10
                         ? s_axis_tready_reg
                         : _GEN_11 | ~(_GEN_12 & _GEN_13) & s_axis_tready_reg);
      m_axis_tvalid_reg <=
        io_aresetn & (_GEN_17 ? m_axis_tvalid_d0 : ~_GEN_18 | ~_GEN_19);
    end
  end // always @(posedge)
  assign io_s_axis_tready = s_axis_tready_reg;
  assign io_m_axis_tdata = m_axis_tdata_reg;
  assign io_m_axis_tkeep = m_axis_tkeep_reg;
  assign io_m_axis_tvalid = m_axis_tvalid_reg;
  assign io_m_axis_tlast = m_axis_tlast_reg;
  assign io_m_axis_tuser = m_axis_tuser_reg;
endmodule

